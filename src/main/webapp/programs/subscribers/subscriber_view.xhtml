<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:s2="http://seca2.jsf/custom"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:pass="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions">
    <h:form id="FormSubscriberView" prependId="false">
        <h:inputHidden id="subscriberId" value="#{FormSubscriberView.subscriber.OBJECTID}"></h:inputHidden>
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <div class="block-content user-profile">

                        <div class="user-profile-block">                                        
                            <div class="user-profile-image">
                                <img src="#{request.contextPath}/templates/common/img/placeholder.png" 
                                     class="img-circle img-thumbnail" width="100" height="100"/>
                            </div>                                        
                        </div>
                        <div class="user-profile-info">
                            <div class="user-profile-title">
                                #{FormSubscriberView.subscriber.EMAIL}
                                <span class="badge badge-#{FormSubscriberView.statusColor[FormSubscriberView.subscriber.SUBSCRIBER_STATUS]}">
                                    #{FormSubscriberView.subscriber.SUBSCRIBER_STATUS}
                                </span>
                            </div>
                            <div class="user-profile-text">
                                
                            </div>
                            <div class="user-profile-text text-primary">
                                <a href="#{request.contextPath}/subscribers" class="text-primary">
                                    <span class="fa fa-backward"></span>
                                    Go back to subscribers list
                                </a>
                            </div>
                        </div>
                        <div class="user-profile-block user-profile-address pull-right">

                            <p><span class="fa fa-calendar"></span> #{FormSubscriberView.subscriberAge}</p>
                            <p jsf:rendered="false"><span class="fa fa-phone"></span> </p>
                            <p jsf:rendered="#{FormSubscriberView.subscriber.SUBSCRIBER_STATUS eq 'VERIFIED'}">
                                <h:commandLink pass:href="#send_email_popup" pass:class="text-success"
                                               pass:data-toggle="modal"
                                               >
                                    <f:ajax listener="#{FormSendSingleEmail.init()}"
                                            render=":FormSendSingleEmail" execute=":FormSendSingleEmail"
                                            onevent="initSendSingleEmail">
                                    </f:ajax>
                                    <span class="fa fa-envelope"></span> 
                                    Send an email
                                </h:commandLink>
                            </p>
                            <p></p>
                            <p jsf:rendered="false"><span class="fa fa-map-marker"></span> </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </h:form>
    <div class="row">
        <div class="col-md-4">
            <div id="subscriber-timeline" class="timeline">
                <c:if test="false">
                    <div class="timeline-event">
                        <div class="timeline-date">
                            <div><span>06</span> Feb</div>
                        </div>
                    </div>
                    <div class="timeline-event">
                        <div class="timeline-event-icon"><i class="fa fa-picture-o"></i></div>
                        <div class="timeline-event-content">
                            <div class="event-title">New images in gallery</div>
                            <p>
                                <a href="img/samples/images/img-3.jpg" class="fancybox" rel="img-group"><img src="img/samples/images/img-0-thumb.jpg" class="img-rounded"/></a>  
                                <a href="img/samples/images/img-4.jpg" class="fancybox" rel="img-group"><img src="img/samples/images/img-1-thumb.jpg" class="img-rounded"/></a> 
                                <a href="img/samples/images/img-5.jpg" class="fancybox" rel="img-group"><img src="img/samples/images/img-2-thumb.jpg" class="img-rounded"/></a>                                       
                            </p>
                            <div class="event-date"><i class="fa fa-clock-o"></i> 14:55</div>                                        
                            <h4>Comments</h4>
                            <div class="comments">
                                <div class="comments-item">
                                    <img src="img/samples/users/user-30.jpg" class="img-circle"/>
                                    <div class="comments-text">
                                        <span>This photos so amazing...</span>
                                        <span class="text-muted"><a href="#"><i class="fa fa-thumbs-up"></i> Like it</a> | <i class="fa fa-clock-o"></i> 16:30 06.02.2014</span>
                                    </div>
                                </div>
                                <div class="comments-item">
                                    <img src="img/samples/users/user-30.jpg" class="img-circle"/>
                                    <div class="comments-text">
                                        <span>Lorem ipsum dolor sit amet, gono tiu fortale sia.</span>
                                        <span class="text-muted"><a href="#"><i class="fa fa-thumbs-up"></i> Like it</a> | <i class="fa fa-clock-o"></i> 15:47 06.02.2014</span>
                                    </div>
                                </div>
                                <div class="comments-form">
                                    <div class="form-group">
                                        <textarea class="form-control" placeholder="Type your comment"></textarea>
                                    </div>
                                    <div class="pull-left">
                                        <div class="btn-group">
                                            <button class="btn btn-default"><span class="fa fa-link"></span></button>
                                            <button class="btn btn-default"><span class="fa fa-picture-o"></span></button>
                                        </div>
                                    </div>
                                    <div class="pull-right">
                                        <button class="btn btn-primary">Send</button>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="timeline-event">
                        <div class="timeline-event-icon"><i class="fa fa-envelope"></i></div>
                        <div class="timeline-event-content">
                            <div class="event-title">Received campaign email</div>
                            <p>
                                Sed convallis rutrum augue, vel egestas augue egestas 
                                vitae. Aenean et iaculis odio. Sed viverra nisi nisi, 
                                nec blandit dolor pretium vel. Sed malesuada ultrices 
                                iaculis. Suspendisse egestas luctus augue vitae viverra. 
                                Nullam interdum magna non lorem elementum consectetur. 
                                Etiam tristique dictum enim, et dignissim odio hendrerit non...
                            </p>
                            <div class="event-date"><i class="fa fa-clock-o"></i> 10:13</div>                                        
                            <h4>Comments</h4>
                            <div class="comments">
                                <div class="comments-form">
                                    <div class="form-group">
                                        <textarea class="form-control" placeholder="Type your comment"></textarea>
                                    </div>
                                    <div class="pull-left">
                                        <div class="btn-group">
                                            <button class="btn btn-default"><span class="fa fa-link"></span></button>
                                            <button class="btn btn-default"><span class="fa fa-picture-o"></span></button>
                                        </div>
                                    </div>
                                    <div class="pull-right">
                                        <button class="btn btn-primary">Send</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="timeline-event">
                        <div class="timeline-event-icon"><i class="fa fa-envelope"></i></div>
                        <div class="timeline-event-content">
                            <div class="event-title">Received campaign email</div>
                            <p>
                                Subject: We are breaking through the Stratosphere!
                            </p>

                            <div class="event-date">
                                <a href="#"><i class="fa fa-envelope-o"></i> Preview email contents</a>
                                | <i class="fa fa-clock-o"></i> 10:13
                            </div>                                        
                        </div>
                    </div>
                    <div class="timeline-event">
                        <div class="timeline-date">
                            <div><span>05</span> Feb</div>
                        </div>
                    </div>
                    <div class="timeline-event">
                        <div class="timeline-event-icon"><i class="fa fa-user"></i></div>
                        <div class="timeline-event-content">
                            <div class="event-title">Commented picture</div>
                            <div class="comments">
                                <div class="comments-item">
                                    <img src="img/samples/users/user-30.jpg" class="img-circle"/>
                                    <div class="comments-text">
                                        <span>Suspendisse egestas luctus augue vitae viverra, nullam interdum magna non lorem elementum.</span>
                                        <span class="text-muted"><a href="#"><i class="fa fa-thumbs-up"></i> Like it</a> | <i class="fa fa-clock-o"></i> 18:21 05.02.2014</span>
                                    </div>
                                </div>
                            </div>                                                                                                                        
                        </div>
                    </div>
                    <div class="timeline-event">
                        <div class="timeline-event-icon"><i class="fa fa-user"></i></div>
                        <div class="timeline-event-content">
                            <div class="event-title">
                                Subscribed to: Radarbox Pilot Membership
                                <br/><span class="text-success">Synced</span>
                            </div>
                            <div class="comments">
                                <div class="comments-item">
                                    <div class="comments-text">
                                        <span>
                                            <strong>Synchronized</strong> from <strong>airnav db</strong> on 
                                            <span class="text-muted"><i class="fa fa-clock-o"></i> 18:21 05.02.2014</span>
                                        </span>

                                    </div>
                                </div>
                            </div>                                                                                                                        
                        </div>
                    </div>
                    <div class="timeline-event">
                        <div class="timeline-event-icon"><i class="fa fa-user"></i></div>
                        <div class="timeline-event-content">
                            <div class="event-title">
                                Subscribed to: Radarbox Free Membership
                                <br/><span class="text-success">Confirmed</span>
                            </div>
                            <div class="comments">
                                <div class="comments-item">
                                    <div class="comments-text">
                                        <span><strong>Mass import</strong> with 918 others.</span>
                                        <span class="text-muted"><i class="fa fa-clock-o"></i> 18:21 05.02.2014</span>
                                    </div>
                                </div>
                            </div>                                                                                                                        
                        </div>
                    </div>
                    <div class="timeline-event">
                        <div class="timeline-event-icon"><i class="fa fa-user"></i></div>
                        <div class="timeline-event-content">
                            <div class="event-title">
                                Subscribed to: Airnav Newsletter 

                            </div>
                            <p>
                                <span class="text-danger"><strong>Not confirmed</strong></span> <span>from <u>signup form</u></span>
                            </p>
                            <div class="event-date">
                                <a href="#"><i class="fa fa-envelope-o"></i> Re-send confirmation</a> 
                                | <i class="fa fa-clock-o"></i> 18:21 05.02.2014
                            </div>                                                                                                                 
                        </div>
                    </div>
                    <div class="timeline-event">
                        <div class="timeline-date">
                            <div>
                                <span>#{FormSubscriberView.subscribedSince.toString("yy")}</span>
                                #{FormSubscriberView.subscribedSince.toString("MMM")}
                            </div>
                        </div>
                    </div>
                </c:if>
                
            </div>
        </div>
        <div class="col-md-8">
            <h:form id="FormSubscriberViewFieldValues">
                <div class="block">

                    <div class="block-head">
                        <h2>Field Values</h2>
                        <ul class="buttons">
                            <li>
                                <a href="javascript:;" class=""
                                   title="reset all fields"
                                   onclick="document.getElementById('FormSubscriberViewFieldValues').reset();
                                           return false;">
                                    <span class="fa fa-refresh"></span>
                                </a>
                            </li>
                            <c:if test="#{FormSubscriberView.remainFields.size() ge 1}" >
                                <li>
                                    <a href="#add_subscriber_field_popup" class="" 
                                       title="add a new field"
                                       data-toggle="modal"
                                       >
                                        <span class="fa fa-plus"></span>
                                    </a>
                                </li>
                            </c:if>
                            <li>
                                <a class="block-toggle"
                                   href="#"
                                   ><span class="fa fa-chevron-down"></span>
                                </a>
                            </li>
                        </ul>  
                    </div>
                    <div class="block-content list nbfc">    
                        <c:forEach items="#{FormSubscriberView.fieldList}" var="field">
                            <div jsf:rendered="#{FormSubscriberView.subscriberValues[field.generateKey()] ne null 
                                                 and field.FIELD_NAME ne 'Email'}"
                                 class="list-item">
                                <div class="list-item-content">
                                    <div class="list-item-container list-item-container-small">
                                        <p>
                                            Last updated
                                        </p>
                                        <p class="list-item-date"
                                           >
                                            <i class="fa fa-clock-o"></i>
                                            <span class="field-value-date"
                                                  data-id="#{FormSubscriberView.subscriber.OBJECTID}"
                                                  data-key="#{field.generateKey()}">
                                                #{FormSubscriberView.subscriberValues[field.generateKey()].DATE_CHANGED}
                                            </span>
                                        </p>
                                    </div>
                                    <div class="list-item-container">
                                        <h4>#{field.FIELD_NAME}:</h4>
                                        <p class="text-muted"
                                           >
                                            <span class="field-value-display"
                                                  data-id="#{FormSubscriberView.subscriber.OBJECTID}"
                                                  data-key="#{field.generateKey()}">
                                                #{FormSubscriberView.subscriberValues[field.generateKey()].VALUE}
                                            </span>
                                        </p>
                                    </div>
                                    <div class="list-item-right">
                                        <button class="btn btn-primary list-item-trigger"
                                                onclick="return false;">
                                            <i class="fa fa-pencil"></i>
                                        </button>
                                    </div>
                                </div>

                                <c:if test="#{field.FIELD_NAME ne 'Email'}" >
                                    <div class="list-item-controls">
                                        <input class="form-control" style="width: 80%; margin-right: 10px" 
                                               data-id="#{FormSubscriberView.subscriber.OBJECTID}"
                                               data-key="#{field.generateKey()}"
                                               data-mand="#{field.MANDATORY}"
                                               data-type="#{field.TYPE}"
                                               value="#{FormSubscriberView.subscriberValues[field.generateKey()].VALUE}" />
                                        <button class="btn btn-success save-field"
                                                onclick="return false;"
                                                data-id="#{FormSubscriberView.subscriber.OBJECTID}"
                                                data-key="#{field.generateKey()}"
                                                >
                                            <i class="fa fa-floppy-o"></i>
                                        </button>

                                        <a href="#delete_subscriber_field_popup" class="btn btn-danger delete-field"
                                           data-id="#{FormSubscriberView.subscriber.OBJECTID}"
                                           data-key="#{field.generateKey()}"
                                           data-toggle="modal">
                                            <i class="fa fa-trash-o"></i>
                                        </a>
                                    </div>
                                </c:if>


                            </div>
                        </c:forEach>
                    </div>

                </div>
            </h:form>
            <div class="block">
                <div class="block-head">
                    <h2>Subscribed Lists</h2>
                    <ul class="buttons">
                        <li><a href="#" class="block-toggle"><span class="fa fa-chevron-down"></span></a></li>
                    </ul>  
                </div>
                <div class="block-content list nbfc">    
                    <ui:repeat value="#{FormSubscriberView.subscriptions}" var="subscription" >
                        <div class="list-item">
                            <div class="list-item-content">
                                <div class="list-item-container list-item-container-small">
                                    <p>
                                        <span class="label label-#{FormSubscriberView.statusColor[subscription.STATUS]}">
                                            #{subscription.STATUS}
                                        </span>
                                    </p>
                                    <p class="list-item-date"><i class="fa fa-clock-o"></i> #{subscription.DATE_CHANGED}</p>
                                </div>
                                <div class="list-item-container">
                                    <h4>#{subscription.TARGET.LIST_NAME}</h4>
                                </div>
                                <div class="list-item-container">
                                    <h4>Subscribed since</h4>
                                    <p class="text-muted">#{subscription.DATE_CREATED}</p>
                                </div>
                                <div class="list-item-right"
                                     jsf:rendered="#{subscription.STATUS ne 'BOUNCED' and subscription.STATUS ne 'UNSUBSCRIBED'}">
                                    <button class="btn btn-primary list-item-trigger"
                                            >
                                        <i class="fa fa-pencil"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="list-item-controls" jsf:rendered="#{subscription.STATUS eq 'NEW'}">
                                <a href="#resend_confirmation_popup" class="btn btn-success resend-email"
                                   data-toggle="modal"
                                   data-source-id="#{subscription.SOURCE.OBJECTID}"
                                   data-target-id="#{subscription.TARGET.OBJECTID}"
                                   data-sent="#{subscription.NUM_CONFIRM_SENT}"
                                   >
                                    <i class="fa fa-envelope"></i> 
                                    Resend Confirmation
                                </a>
                            </div>
                            <div class="list-item-controls" jsf:rendered="#{subscription.STATUS eq 'CONFIRMED'}">
                                <a href="#remove_subscription_popup" class="btn btn-danger remove-sub"
                                   data-toggle="modal"
                                   data-unsubkey="#{subscription.UNSUBSCRIBE_KEY}"
                                   data-list-name="#{subscription.TARGET.LIST_NAME}">
                                    <i class="fa fa-trash-o"></i> 
                                    Remove
                                </a>
                            </div>
                            <div class="list-item-controls" jsf:rendered="#{subscription.STATUS eq 'REMOVED'}">
                                <a href="#restore_subscription_popup" class="btn btn-warning restore-sub"
                                   data-toggle="modal"
                                   data-unsubkey="#{subscription.UNSUBSCRIBE_KEY}"
                                   data-list-name="#{subscription.TARGET.LIST_NAME}">
                                    <i class="fa fa-reply"></i> 
                                    Restore
                                </a>
                            </div>
                        </div>
                    </ui:repeat>
                    <h:panelGrid rendered="false">
                        <div class="list-item">
                            <div class="list-item-content">
                                <div class="list-item-container list-item-container-small">
                                    <p><span class="label label-danger">Removed</span></p>
                                    <p class="list-item-date"><i class="fa fa-clock-o"></i> 14:12</p>
                                </div>
                                <div class="list-item-container">
                                    <h4>MySQL - Update Server</h4>
                                    <div class="progress progress-small">
                                        <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 5%"></div>
                                    </div>                                                                                                
                                </div>
                                <div class="list-item-container">
                                    <h4>Reason:</h4>
                                    <p class="text-muted">Money...</p>
                                </div>
                                <div class="list-item-right">
                                    <button class="btn  btn-primary list-item-trigger"><i class="fa fa-pencil"></i></button>
                                </div>
                            </div>
                            <div class="list-item-controls">                                            
                                <button class="btn btn-danger"><i class="fa fa-refresh"></i> Restore</button>
                            </div>
                        </div>
                        <div class="list-item">
                            <div class="list-item-content">
                                <div class="list-item-container list-item-container-small">
                                    <p><span class="label label-warning">Paused</span></p>
                                    <p class="list-item-date"><i class="fa fa-clock-o"></i> 12:32</p>
                                </div>
                                <div class="list-item-container">
                                    <h4>dashboard.html</h4>
                                    <div class="progress progress-small">
                                        <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 75%"></div>
                                    </div>                                                                                                
                                </div>
                                <div class="list-item-container">
                                    <h4>Comment:</h4>
                                    <p class="text-muted">Waiting for dev...</p>
                                </div>
                                <div class="list-item-right">
                                    <button class="btn btn-primary list-item-trigger"><i class="fa fa-pencil"></i></button>
                                </div>
                            </div>
                            <div class="list-item-controls">
                                <button class="btn btn-default"><i class="fa fa-pencil-square-o"></i> View</button>
                                <button class="btn btn-warning"><i class="fa fa-play"></i> Start</button>
                                <button class="btn btn-danger"><i class="fa fa-trash-o"></i> Delete</button>
                            </div>
                        </div>
                        <div class="list-item">
                            <div class="list-item-content">
                                <div class="list-item-container list-item-container-small">
                                    <p><span class="label label-success">Done</span></p>
                                    <p class="list-item-date"><i class="fa fa-clock-o"></i> 09:17</p>
                                </div>
                                <div class="list-item-container">
                                    <h4>Framework-ui.psd</h4>
                                    <div class="progress progress-small">
                                        <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 99%"></div>
                                    </div>                                                                                                
                                </div>
                                <div class="list-item-container">
                                    <h4>Complete:</h4>
                                    <p class="text-muted"><a href="#"><i class="fa fa-floppy-o"></i> download</a></p>
                                </div>
                                <div class="list-item-right">
                                    <button class="btn btn-primary list-item-trigger"><i class="fa fa-pencil"></i></button>
                                </div>
                            </div>
                            <div class="list-item-controls">
                                <button class="btn btn-danger"><i class="fa fa-trash-o"></i> Delete</button>
                            </div>
                        </div>
                    </h:panelGrid>
                </div>
            </div>

            <div class="widget-window" jsf:rendered="false">
                <div class="window window-dark">
                    <div class="window-block" style="margin-bottom: 10px;">
                        <h4>Web Developer</h4>
                        <p>With expirience 7 years</p>
                        <h4>Knowlage</h4>
                        <p>HTML,CSS,JS,PHP,MySQL</p>
                    </div>
                    <div class="window-block window-wide">
                        <h4>HTML</h4>                                        
                        <div class="progress progress-small">
                            <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 90%"></div>
                        </div>
                        <h4>CSS</h4>                                        
                        <div class="progress progress-small">
                            <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 85%"></div>
                        </div>
                        <h4>JS</h4>                                        
                        <div class="progress progress-small">
                            <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 65%"></div>
                        </div>
                        <h4>PHP</h4>                                        
                        <div class="progress progress-small">
                            <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 70%"></div>
                        </div>
                        <h4>MySQL</h4>                                        
                        <div class="progress progress-small">
                            <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 80%"></div>
                        </div>
                    </div>                                    
                </div>
            </div>

        </div>
    </div>
</html>